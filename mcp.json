{
  "name": "db-xplorer",
  "version": "0.0.2",
  "entrypoint": "server.py",
  "tools": {
    "list_schemas": {
      "description": "List all interesting schemas (collections_*, recovery_*, gold, etc.)",
      "input_schema": { "type": "object", "properties": {} }
    },
    "list_tables": {
      "description": "List all tables inside a schema with row_estimate and description",
      "input_schema": {
        "type": "object",
        "properties": { "schema": { "type": "string" } },
        "required": ["schema"]
      }
    },
    "describe_table": {
      "description": "Describe columns, grain, dimensions, measures, and sample metadata",
      "input_schema": {
        "type": "object",
        "properties": {
          "schema": { "type": "string" },
          "table": { "type": "string" }
        },
        "required": ["schema", "table"]
      }
    },
    "search_columns": {
      "description": "Search for columns by name or description across all schemas",
      "input_schema": {
        "type": "object",
        "properties": { "pattern": { "type": "string" } },
        "required": ["pattern"]
      }
    },
    "preview_rows": {
      "description": "Preview first N rows of a table",
      "input_schema": {
        "type": "object",
        "properties": {
          "schema": { "type": "string" },
          "table": { "type": "string" },
          "limit": { "type": "integer" }
        },
        "required": ["schema", "table"]
      }
    },
    "get_row_count": {
      "description": "Get approximate or exact row count for a table",
      "input_schema": {
        "type": "object",
        "properties": {
          "schema": { "type": "string" },
          "table": { "type": "string" }
        },
        "required": ["schema", "table"]
      }
    },
    "run_query_safe": {
      "description": "Run a safe SELECT query with guards and auto LIMIT",
      "input_schema": {
        "type": "object",
        "properties": {
          "sql": { "type": "string" }
        },
        "required": ["sql"]
      }
    },
    "smart_search": {
      "description": "Comprehensive search across schemas, tables, columns, and metadata. Searches for query term everywhere.",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "max_results": { "type": "integer" }
        },
        "required": ["query"]
      }
    },
    "deep_search": {
      "description": "Search for a term inside actual table data. Searches across all text columns in a specific table.",
      "input_schema": {
        "type": "object",
        "properties": {
          "schema": { "type": "string" },
          "table": { "type": "string" },
          "search_term": { "type": "string" },
          "limit": { "type": "integer" }
        },
        "required": ["schema", "table", "search_term"]
      }
    },
    "analyze_data": {
      "description": "Analyze data based on ANY natural language query - handles typos, variations, flexible matching. Works with any question like 'what is prediction for nov 23', 'show me accuracy data', 'find precision metrics'. Automatically searches schemas, tables, columns with multiple fallback strategies.",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" },
          "date_filter": { "type": "string" }
        },
        "required": ["query"]
      }
    },
    "find_data_by_value": {
      "description": "Find which tables and rows contain a specific value. Searches across all tables in interesting schemas.",
      "input_schema": {
        "type": "object",
        "properties": {
          "search_value": { "type": "string" },
          "data_type": { "type": "string" }
        },
        "required": ["search_value"]
      }
    },
    "verify_table_exists": {
      "description": "Check if a table exists in the specified schema. If not found, provides suggestions for similar table names and searches other schemas. Use this before querying tables to avoid errors.",
      "input_schema": {
        "type": "object",
        "properties": {
          "schema": { "type": "string" },
          "table": { "type": "string" }
        },
        "required": ["schema", "table"]
      }
    },
    "find_table_schema": {
      "description": "Find which schema(s) contain a table with the given name. Useful when you know the table name but not which schema it's in. Example: find_table_schema('transition_matrix') will find all schemas containing this table.",
      "input_schema": {
        "type": "object",
        "properties": {
          "table_name": { "type": "string" }
        },
        "required": ["table_name"]
      }
    }
  }
}

